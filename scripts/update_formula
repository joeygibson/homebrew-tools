#!/usr/bin/env bash
set -euo pipefail

# Usage: update_formula <formula-name>
# Example: update_formula jsonquill

if [[ $# -ne 1 ]]; then
    echo "Usage: update_formula <formula-name>" >&2
    echo "Example: update_formula jsonquill" >&2
    exit 1
fi

formula_name="$1"
formula_file="Formula/${formula_name}.rb"

if [[ ! -f "$formula_file" ]]; then
    echo "Error: Formula file not found: $formula_file" >&2
    exit 1
fi

# Check required dependencies
for cmd in gh curl shasum sed git jq; do
    if ! command -v "$cmd" &> /dev/null; then
        echo "Error: Required command '$cmd' not found" >&2
        echo "Please install $cmd and try again" >&2
        exit 1
    fi
done
